<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sales Summary ${seed}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="p-4">
    <div class="container">
        <h1>Sales Summary ${seed}</h1>
        <div id="total-sales" class="fs-3 mt-3">Loading...</div>
    </div>
    <script>
        async function fetchAndSumSales() {
            try {
                const response = await fetch('data.csv');
                if (!response.ok) throw new Error('Failed to fetch data.csv');
                const text = await response.text();

                // Parse CSV header
                const lines = text.trim().split('\n');
                const headers = lines[0].split(',').map(h => h.trim());
                const salesIndex = headers.findIndex(h => h.toLowerCase() === 'sales');
                if (salesIndex === -1) throw new Error('No sales column found');

                // Sum sales values
                let sum = 0;
                for(let i = 1; i < lines.length; i++) {
                    const cols = lines[i].split(',');
                    const val = parseFloat(cols[salesIndex]);
                    if (!isNaN(val)) {
                        sum += val;
                    }
                }

                document.getElementById('total-sales').textContent = sum.toLocaleString(undefined, {style:'currency', currency:'USD'});
            } catch(e) {
                document.getElementById('total-sales').textContent = 'Error loading sales data';
                console.error(e);
            }
        }
        fetchAndSumSales();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>